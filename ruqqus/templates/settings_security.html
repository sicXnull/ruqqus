{% extends "settings.html" %}

{% block pagetitle %}Security Settings - Ruqqus{% endblock %}

{% block content %}

        <div class="row justify-content-around">

            <div class="col-12 col-md-7 h-100">

            {% if error %}
<div class="alert alert-danger alert-dismissible fade show my-3" role="alert">
<i class="fas fa-exclamation-circle"></i>
<span>
  {{ error }}
 </span>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true"><i class="far fa-times"></i></span>
  </button>
</div>
{% endif %}
{% if msg %}
<div class="alert alert-success alert-dismissible fade show my-3" role="alert">
<i class="fas fa-check-circle" aria-hidden="true"></i>
<span>
  {{ msg }}
</span>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true"><i class="far fa-times"></i></span>
  </button>
</div>
{% endif %}

                <div class="mt-3 mt-md-0">

                    <h1 class="h3">Settings</h1>

                </div>

                <!-- Submission type toggle -->

                <div class="flex-row bg-light box-shadow-bottom sticky d-flex pt-3 mb-5">

                    <ul class="nav post-nav mr-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="/settings/profile">Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="/settings/security">Security</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link d-none" href="/settings/notifications">Notifications</a>
                        </li>
                    </ul>

                </div>


                <div class="row">

                    <div class="col">

                        <div class="settings">

                            <h2 class="h5">Password</h2>

                            <p class="text-small text-muted">Change your account password.</p>

                            <div class="settings-section rounded">

                                <form action="/settings/security" method="post">

                                    <div class="body">

                                    <div class="d-lg-flex">

                                        <label for="new_password" class="mb-0 w-lg-25">New Password</label>

                                        <input class="form-control w-lg-75" id="new_password"
                                            aria-describedby="new_password" type="password" name="new_password"
                                            required>
                                        <small id="passwordHelpChange"
                                            class="form-text font-weight-bold text-muted d-none mt-1 w-lg-75">Minimum of 8
                                            characters
                                            required.</small>
                                        <small id="passwordHelpChangeSuccess"
                                            class="form-text font-weight-bold text-success d-none mt-1 w-lg-75">Your password
                                            meets the
                                            requirements.
                                        </small>

                                    </div>

                                    <div class="d-lg-flex mt-3">

                                        <label for="cnf_password" class="mb-0 w-lg-25">Confirm New Password</label>

                                        <input class="form-control w-lg-75" id="cnf_password"
                                            aria-describedby="cnf_password" type="password" name="cnf_password"
                                            required>

                                        <small id="passwordHelpCnf"
                                            class="form-text font-weight-bold text-muted d-none mt-1 w-lg-75">Passwords do not
                                            match.</small>
                                        <small id="passwordHelpCnfSuccess"
                                            class="form-text font-weight-bold text-success d-none mt-1 w-lg-75">Passwords match.
                                        </small>

                                    </div>

                                    <div class="d-lg-flex mt-5">

                                        <label for="old_password" class="mb-0 w-lg-25">Old Password</label>

                                        <input class="form-control mb-2 w-lg-75" id="old_password"
                                            aria-describedby="old_password" type="password" name="old_password"
                                            required>

                                    </div>

                                    </div>

                                    <div class="footer">

                                        <input type="hidden" name="formkey" value="{{ v.formkey }}">
                                        <input type="hidden" name="now" value="1563891643">

                                        <div class="d-flex">

                                            <input class="btn btn-primary ml-auto"
                                                type="submit" value="Change Password">

                                        </div>

                                    </div>

                                </form>

                            </div>

                            <h2 class="h5">Email</h2>
			
                            <p class="text-small text-muted">Change the email address used to sign in to your account.</p>

                            <div class="settings-section rounded">

                                <form  action="/settings/security" method="post">
				<input type="hidden" name="formkey" value="{{ v.formkey }}">

                                    <div class="body">

                                    <div class="d-lg-flex">
                                     
                                        <label for="new-email" class="w-lg-25">Email</label>

                                        <div class="w-lg-75">

                                        <input class="form-control" id="new_email" placeholder="{{ v.email }}"
                                            aria-describedby="new_email" type="email" name="new_email" required>
                                            {% if not v.is_activated %}
                                            <div class="text-danger text-small-extra mt-1" id="email-verify-text">Email not verified. You will not be able to recover your account with this email until you verify it. <u><a href="javascript:void(0)" onclick="post('/api/verify_email');emailVerifyText();" class="text-danger">Verify now.</a></u></div>
                                            {% endif %}

                                    </div>

                                    </div>

                                    <div class="d-lg-flex mt-3">

					<label for="email-password" class="w-lg-25 d-none" id="email-password-label">Password</label>

                    <div class="w-lg-75">

					<input autocomplete="new-password" type="password" class="form-control mb-2 d-none" id="email-password" name="password" required>

                    <small id="emailpasswordRequired" class="form-text font-weight-bold text-danger d-none mt-1">Password required to update your email.</small>

                    </div>

                    </div>

                    <small id="emailpasswordRequired" class="form-text font-weight-bold text-danger d-none mt-1">Password required to update your email.</small>

                                    </div>

                                    <div class="footer">

                                        <div class="d-flex">

					

                                            <input class="btn btn-primary ml-auto"
                                                type="submit" value="Update Email">


                                        </div>

                                    </div>

                                </form>

                            </div>

                            <h2 class="h5 text-danger d-none">Danger Zone</h2>

                            <p class="text-small text-muted d-none">Delete your entire Ruqqus account from existence.</p>

                            <div class="settings-section rounded d-none">

                                <div class="body">

                                    <label for="delete_account">Delete Account</label>

                                    <p>This action cannot be undone.</p>

                                </div>

                                <div class="footer">

                                    <input type="hidden" name="formkey" value="x">

                                    <div class="d-flex">

                                        <button class="btn btn-outline-danger ml-auto" id="delete_account_confirm"
                                            data-toggle="modal" data-target="#exampleModalCenter"
                                            value="Delete Account">Delete Account
                                        </button>

                                    </div>

                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>

{% endblock %}